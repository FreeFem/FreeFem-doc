<script>
	// Try to catch old documentation links
	let url = window.location.href

	// References without s in the old documentation
	if (url.includes('reference') && !url.includes('references'))
		url = url.replace('reference', 'references')

	// Modify link to retrieve good one
	let index = url.lastIndexOf('/')
	if (index === (url.length-1)) {
		url = url.slice(0, -1)
		index = url.lastIndexOf('/')
	}

	const lastWay = url.slice(index+1)
	const newLastWay = lastWay.charAt(0).toLowerCase() + lastWay.slice(1)

	if (lastWay !== newLastWay) {
		url = url.replace(lastWay, newLastWay)

		// Try new url
		window.location.href = url
	}

	// Else redirect to home
	window.location.href = 'https://doc.freefem.org/introduction/index.html'
</script>
